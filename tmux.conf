### General Settings
set -g default-terminal "screen-256color"
# start window index at 1, not 0
set -g base-index 1
setw -g pane-base-index 1
# Set active window to red in tab list
set-window-option -g window-status-current-bg red
# Large history
set-option -g history-limit 3000
# Highlight status bar on activity
setw -g monitor-activity on
#set -g visual-activity on
#set -g visual-bell on
# automatically set window title
set-window-option -g automatic-rename off
set-window-option -g allow-rename off
# renumber windows
set-option -g renumber-windows on


### Mouse
# Toggle mouse on
bind m \
  set -g mode-mouse on \;\
  set -g mouse-resize-pane on \;\
  set -g mouse-select-pane on \;\
  set -g mouse-select-window on \;\
  display 'Mouse: ON'
# Toggle mouse off
bind M \
  set -g mode-mouse off \;\
  set -g mouse-resize-pane off \;\
  set -g mouse-select-pane off \;\
  set -g mouse-select-window off \;\
  display 'Mouse: OFF'


### Clipboard
# Copy and paste with xclip
bind C-c run "tmux show-buffer | xclip -i -selection clipboard"
bind C-v run "tmux set-buffer -- \"$(xclip -o -selection clipboard)\"; tmux paste-buffer"


### Keys
# Prefix key
#set -g prefix C-b
unbind C-b
set -g prefix C-a
bind a send-prefix
# use prefix + h and l to navigate windows
bind-key n next-window
bind-key N previous-window
# keys for last used
bind-key C-w last-window
bind-key C-a last-pane
# vi-mode
setw -g mode-keys vi
unbind [
bind Escape copy-mode
unbind p
bind p paste-buffer
bind-key -t vi-copy 'v' begin-selection
bind-key -t vi-copy 'y' copy-selection
# present a menu of URLs to open from the visible pane
bind-key u capture-pane \;\
  save-buffer /tmp/tmux-buffer \;\
  split-window -l 10 'urlview /tmp/tmux-buffer'
# smart vim aware pane switching
is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?)(diff)?$"'
bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"
bind -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"
bind-key l send-keys 'C-l'
# reload tmux.conf
bind R source-file ~/.tmux.conf \; display-message "Config reloaded..."


### Status line
set-option -g status on
set-option -g status-interval 2
set-option -g status-utf8 on
set-option -g status-justify "centre"
set-option -g status-left-length 60
set-option -g status-right-length 90
# status line
set-option -g status-left "[#S:#I.#P]"
set-option -g status-right "[#h] [#(date +'%0H:%M %a %d-%b-%y')]"


### Colour - Solarized
# colour033 -> DodgerBlue1
# colour136 -> DarkGoldenrod
# colour166 -> DarkOrange3
# colour235 -> Grey15
# colour240 -> Grey35
# colour244 -> Grey50
# default statusbar colors
set-option -g status-bg colour000
set-option -g status-fg colour136
set-option -g status-attr default
# default window title colors
set-window-option -g window-status-fg colour244
set-window-option -g window-status-bg default
set-window-option -g window-status-attr dim
# active window title colors
set-window-option -g window-status-current-fg colour166
set-window-option -g window-status-current-bg default
set-window-option -g window-status-current-attr bright
# pane border
set-option -g pane-border-fg colour235
set-option -g pane-active-border-fg colour166
# message text
set-option -g message-bg colour000
set-option -g message-fg colour166
# pane number display
set-option -g display-panes-active-colour colour33
set-option -g display-panes-colour colour166
# clock
set-window-option -g clock-mode-colour colour64
